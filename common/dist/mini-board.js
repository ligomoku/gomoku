import * as domData from './data';
import { uciToMove } from 'chessground/util';
export const init = (node) => {
    const [fen, orientation, lm] = node.getAttribute('data-state').split(',');
    initWith(node, fen, orientation, lm);
};
export const initWith = (node, fen, orientation, lm) => {
    if (!window.Chessground)
        setTimeout(() => init(node), 500);
    else {
        domData.set(node, 'chessground', window.Chessground(node, {
            orientation,
            coordinates: false,
            viewOnly: !node.getAttribute('data-playable'),
            fen,
            lastMove: uciToMove(lm),
            drawable: {
                enabled: false,
                visible: false,
            },
        }));
    }
};
export const initAll = (parent) => Array.from((parent || document).getElementsByClassName('mini-board--init')).forEach((el) => {
    el.classList.remove('mini-board--init');
    init(el);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWluaS1ib2FyZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9taW5pLWJvYXJkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sS0FBSyxPQUFPLE1BQU0sUUFBUSxDQUFDO0FBQ2xDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUU3QyxNQUFNLENBQUMsTUFBTSxJQUFJLEdBQUcsQ0FBQyxJQUFpQixFQUFRLEVBQUU7SUFDOUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxXQUFXLEVBQUUsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxZQUFZLENBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDM0UsUUFBUSxDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsV0FBb0IsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUNoRCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxRQUFRLEdBQUcsQ0FBQyxJQUFpQixFQUFFLEdBQVcsRUFBRSxXQUFrQixFQUFFLEVBQVcsRUFBUSxFQUFFO0lBQ2hHLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVztRQUFFLFVBQVUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7U0FDdEQ7UUFDSCxPQUFPLENBQUMsR0FBRyxDQUNULElBQUksRUFDSixhQUFhLEVBQ2IsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUU7WUFDdkIsV0FBVztZQUNYLFdBQVcsRUFBRSxLQUFLO1lBQ2xCLFFBQVEsRUFBRSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsZUFBZSxDQUFDO1lBQzdDLEdBQUc7WUFDSCxRQUFRLEVBQUUsU0FBUyxDQUFDLEVBQUUsQ0FBQztZQUN2QixRQUFRLEVBQUU7Z0JBQ1IsT0FBTyxFQUFFLEtBQUs7Z0JBQ2QsT0FBTyxFQUFFLEtBQUs7YUFDZjtTQUNGLENBQUMsQ0FDSCxDQUFDO0tBQ0g7QUFDSCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxPQUFPLEdBQUcsQ0FBQyxNQUFvQixFQUFFLEVBQUUsQ0FDOUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sSUFBSSxRQUFRLENBQUMsQ0FBQyxzQkFBc0IsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBZSxFQUFFLEVBQUU7SUFDdEcsRUFBRSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUN4QyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDWCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGRvbURhdGEgZnJvbSAnLi9kYXRhJztcbmltcG9ydCB7IHVjaVRvTW92ZSB9IGZyb20gJ2NoZXNzZ3JvdW5kL3V0aWwnO1xuXG5leHBvcnQgY29uc3QgaW5pdCA9IChub2RlOiBIVE1MRWxlbWVudCk6IHZvaWQgPT4ge1xuICBjb25zdCBbZmVuLCBvcmllbnRhdGlvbiwgbG1dID0gbm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3RhdGUnKSEuc3BsaXQoJywnKTtcbiAgaW5pdFdpdGgobm9kZSwgZmVuLCBvcmllbnRhdGlvbiBhcyBDb2xvciwgbG0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGluaXRXaXRoID0gKG5vZGU6IEhUTUxFbGVtZW50LCBmZW46IHN0cmluZywgb3JpZW50YXRpb246IENvbG9yLCBsbT86IHN0cmluZyk6IHZvaWQgPT4ge1xuICBpZiAoIXdpbmRvdy5DaGVzc2dyb3VuZCkgc2V0VGltZW91dCgoKSA9PiBpbml0KG5vZGUpLCA1MDApO1xuICBlbHNlIHtcbiAgICBkb21EYXRhLnNldChcbiAgICAgIG5vZGUsXG4gICAgICAnY2hlc3Nncm91bmQnLFxuICAgICAgd2luZG93LkNoZXNzZ3JvdW5kKG5vZGUsIHtcbiAgICAgICAgb3JpZW50YXRpb24sXG4gICAgICAgIGNvb3JkaW5hdGVzOiBmYWxzZSxcbiAgICAgICAgdmlld09ubHk6ICFub2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1wbGF5YWJsZScpLFxuICAgICAgICBmZW4sXG4gICAgICAgIGxhc3RNb3ZlOiB1Y2lUb01vdmUobG0pLFxuICAgICAgICBkcmF3YWJsZToge1xuICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgIHZpc2libGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICApO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgaW5pdEFsbCA9IChwYXJlbnQ/OiBIVE1MRWxlbWVudCkgPT5cbiAgQXJyYXkuZnJvbSgocGFyZW50IHx8IGRvY3VtZW50KS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtaW5pLWJvYXJkLS1pbml0JykpLmZvckVhY2goKGVsOiBIVE1MRWxlbWVudCkgPT4ge1xuICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ21pbmktYm9hcmQtLWluaXQnKTtcbiAgICBpbml0KGVsKTtcbiAgfSk7XG4iXX0=